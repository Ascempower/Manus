[build]
  base = ""
  publish = "out"
  command = "pnpm install --frozen-lockfile && pnpm run build"

[build.environment]
  NODE_VERSION = "18"

# Disable Netlify's prerendering to ensure consistent builds
[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

[build.processing.html]
  pretty_urls = true

# Explicitly disable prerendering
[[headers]]
  for = "/*"
  [headers.values]
    X-Prerender = "false"

# VGS Integration is managed through the Netlify UI
# See vgs-integration-notes.md for details
